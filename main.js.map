{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex.practicum/./src/scripts/components/card.js","webpack://yandex.practicum/./src/scripts/components/modal.js","webpack://yandex.practicum/./src/scripts/components/validation.js","webpack://yandex.practicum/./src/scripts/components/api.js","webpack://yandex.practicum/./src/scripts/index.js"],"sourcesContent":["const cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nfunction createCard(card, user, deleteOnClick, likeOnClick, cardOnClick) {\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true);\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const title = cardElement.querySelector(\".card__title\");\r\n  const likeButton = cardElement.querySelector(\".card__like-button\");\r\n  const likeNumber = cardElement.querySelector(\".card__like-number\");\r\n\r\n  cardImage.setAttribute(\"alt\", card.name);\r\n  cardImage.setAttribute(\"src\", card.link);\r\n  if (card.owner._id === user._id) {\r\n    deleteButton.addEventListener(\"click\", () =>\r\n      deleteOnClick(cardElement, card._id)\r\n    );\r\n    deleteButton.classList.add(\"card__delete-button-is_active\");\r\n  }\r\n  likeButton.addEventListener(\"click\", () =>\r\n    likeOnClick(likeButton, card._id, likeNumber)\r\n  );\r\n  cardImage.addEventListener(\"click\", () => cardOnClick(cardImage, title));\r\n  title.textContent = card.name;\r\n  likeNumber.textContent = card.likes.length;\r\n  if (card.likes.some((likeUser) => likeUser._id === user._id)) {\r\n    likeButton.classList.toggle(\"card__like-button_is-active\");\r\n  }\r\n  return cardElement;\r\n}\r\n\r\nfunction deleteCard(cardElement) {\r\n  cardElement.remove();\r\n}\r\n\r\nfunction likeCard(cardElement, likeNumberElement, updatedCard) {\r\n  likeNumberElement.textContent = updatedCard.likes.length;\r\n  cardElement.classList.toggle(\"card__like-button_is-active\");\r\n}\r\n\r\nexport { createCard, deleteCard, likeCard };","const onEscape = (evt) => {\r\n  if (evt.key == \"Escape\") {\r\n    closeModal(document.querySelector(\".popup_is-opened\"));\r\n  }\r\n};\r\n\r\nconst onClickExit = (evt) => {\r\n  if (evt.target === document.querySelector(\".popup_is-opened\")) {\r\n    closeModal(document.querySelector(\".popup_is-opened\"));\r\n  }\r\n};\r\n\r\nfunction openModal(popUpElement) {\r\n  popUpElement.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", onEscape);\r\n  document.addEventListener(\"mousedown\", onClickExit);\r\n}\r\n\r\nfunction closeModal(popUpElement) {\r\n  popUpElement.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", onEscape);\r\n  document.removeEventListener(\"mousedown\", onClickExit);\r\n}\r\n\r\nexport { openModal, closeModal };\r\n","const hideInputError = (form, input, config) => {\r\n  const errorElement = form.querySelector(`.${input.id}-error`);\r\n  input.classList.remove(config.inputErrorClass);\r\n  errorElement.classList.remove(config.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\nconst showInputError = (form, input, errorMessage, config) => {\r\n  const errorElement = form.querySelector(`.${input.id}-error`);\r\n  input.classList.add(config.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(config.errorClass);\r\n};\r\n\r\nconst checkInputValidity = (form, input, config) => {\r\n  if (input.validity.patternMismatch) {\r\n    input.setCustomValidity(input.dataset.errorMessage);\r\n  } else {\r\n    input.setCustomValidity(\"\");\r\n  }\r\n  if (!input.validity.valid) {\r\n    showInputError(form, input, input.validationMessage, config);\r\n  } else {\r\n    hideInputError(form, input, config);\r\n  }\r\n};\r\n\r\nconst hasInvalidInput = (inputs) => {\r\n  return inputs.some((input) => {\r\n    return !input.validity.valid;\r\n  });\r\n};\r\n\r\nconst toggleButtonState = (inputs, button, config) => {\r\n  if (hasInvalidInput(inputs)) {\r\n    button.disabled = true;\r\n    button.classList.add(config.inactiveButtonClass);\r\n  } else {\r\n    button.disabled = false;\r\n    button.classList.remove(config.inactiveButtonClass);\r\n  }\r\n};\r\n\r\nconst setEventListener = (form, config) => {\r\n  const inputs = Array.from(form.querySelectorAll(config.inputSelector));\r\n  const button = form.querySelector(config.submitButtonSelector);\r\n  toggleButtonState(inputs, button, config);\r\n  inputs.forEach((input) => {\r\n    input.addEventListener(\"input\", () => {\r\n      checkInputValidity(form, input, config);\r\n      toggleButtonState(inputs, button, config);\r\n    });\r\n  });\r\n};\r\n\r\nconst enableValidation = (config) => {\r\n  const forms = Array.from(document.querySelectorAll(config.formSelector));\r\n  forms.forEach((form) => {\r\n    form.addEventListener(\"submit\", (evt) => {\r\n      evt.preventDefault();\r\n    });\r\n    setEventListener(form, config);\r\n  });\r\n};\r\n\r\nconst clearValidation = (form,config) => {\r\n  const inputs = Array.from(\r\n    form.querySelectorAll(config.inputSelector)\r\n  );\r\n  inputs.forEach((input) => {\r\n    hideInputError(form, input, config);\r\n  });\r\n  const button = form.querySelector(config.submitButtonSelector);\r\n  toggleButtonState(inputs, button, config);\r\n};\r\n\r\nexport { enableValidation, clearValidation };\r\n","const config = {\r\n  url: \"https://nomoreparties.co/v1/wff-cohort-41\",\r\n  headers: {\r\n    authorization: \"72a12bab-2ae0-4e7f-b7a7-608bd2c81fb1\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nconst getInitialCards = () => {\r\n  return fetch(`${config.url}/cards`, { headers: config.headers }).then(\r\n    (res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } else {\r\n        return Promise.reject(`Error initialize cards: ${res.status}`);\r\n      }\r\n    }\r\n  );\r\n};\r\n\r\nconst addNewCardItem = (name, link) => {\r\n  return fetch(`${config.url}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, link }),\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Error adding card: ${res.status}`);\r\n    }\r\n  });\r\n};\r\n\r\nconst deleteCardItem = (cardId) => {\r\n  return fetch(`${config.url}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    if (!res.ok) return Promise.reject(`Error deleting card: ${res.status}`);\r\n  });\r\n};\r\n\r\nconst likeCardItem = (cardId) => {\r\n  return fetch(`${config.url}/cards/likes/${cardId}`, {\r\n    method: \"PUT\",\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Error liking card: ${res.status}`);\r\n    }\r\n  });\r\n};\r\n\r\nconst disLikeCardItem = (cardId) => {\r\n  return fetch(`${config.url}/cards/likes/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Error liking card: ${res.status}`);\r\n    }\r\n  });\r\n};\r\n\r\nconst getUserProfile = () => {\r\n  return fetch(`${config.url}/users/me`, { headers: config.headers }).then(\r\n    (res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } else {\r\n        return Promise.reject(`Error getting user: ${res.status}`);\r\n      }\r\n    }\r\n  );\r\n};\r\n\r\nconst editUserProfile = (name, about) => {\r\n  return fetch(`${config.url}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, about }),\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Error editing user: ${res.status}`);\r\n    }\r\n  });\r\n};\r\n\r\nconst editUserAvatar = (avatar) => {\r\n  return fetch(`${config.url}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ avatar }),\r\n  }).then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      return Promise.reject(`Error editing avatar: ${res.status}`);\r\n    }\r\n  });\r\n};\r\n\r\nexport {\r\n  getInitialCards,\r\n  getUserProfile,\r\n  editUserProfile,\r\n  addNewCardItem,\r\n  deleteCardItem,\r\n  likeCardItem,\r\n  disLikeCardItem,\r\n  editUserAvatar,\r\n};\r\n","import \"../pages/index.css\";\r\nimport { createCard, deleteCard, likeCard } from \"./components/card.js\";\r\nimport { openModal, closeModal } from \"./components/modal.js\";\r\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\r\nimport {\r\n  getInitialCards,\r\n  getUserProfile,\r\n  editUserProfile,\r\n  addNewCardItem,\r\n  deleteCardItem,\r\n  likeCardItem,\r\n  disLikeCardItem,\r\n  editUserAvatar,\r\n} from \"./components/api.js\";\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nconst placeListElement = document.querySelector(\".places__list\");\r\n\r\nconst profileEditButton = document.querySelector(\".profile__edit-button\");\r\nconst profileEditPopup = document.querySelector(\".popup_type_edit\");\r\nconst popupClose = document.querySelectorAll(\".popup__close\");\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDesc = document.querySelector(\".profile__description\");\r\nconst profileAvatar = document.querySelector(\".profile__image\");\r\nconst editForm = document.querySelector('form[name=\"edit-profile\"]');\r\nconst editFormName = document.querySelector(\".popup__input_type_name\");\r\nconst editFormDesc = document.querySelector(\".popup__input_type_description\");\r\n\r\nconst profileAddButton = document.querySelector(\".profile__add-button\");\r\nconst profileAddPopup = document.querySelector(\".popup_type_new-card\");\r\nconst addForm = document.querySelector('form[name=\"new-place\"]');\r\nconst addFormName = document.querySelector(\".popup__input_type_card-name\");\r\nconst addFormLink = document.querySelector(\".popup__input_type_url\");\r\n\r\nconst popupImage = document.querySelector(\".popup_type_image\");\r\nconst popupImageSrc = document.querySelector(\".popup__image\");\r\nconst popupImageCaption = document.querySelector(\".popup__caption\");\r\n\r\nconst avatarForm = document.querySelector('form[name=\"new-avatar\"]');\r\nconst avatarPopup = document.querySelector(\".popup_type_new-avatar\");\r\nconst avatarFormLink = document.querySelector(\".popup__input_type_avatar_url\");\r\n\r\nconst onDeleteCard = (cardElement, cardId) => {\r\n  deleteCardItem(cardId).catch((err) => console.log(err));\r\n  deleteCard(cardElement);\r\n};\r\n\r\nconst onLikeCard = (likeButton, cardId, likeNumber) => {\r\n  const cardIsLiked = likeButton.classList.contains(\r\n    \"card__like-button_is-active\"\r\n  );\r\n  if (cardIsLiked) {\r\n    disLikeCardItem(cardId)\r\n      .then((updatedCard) => {\r\n        likeCard(likeButton, likeNumber, updatedCard);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  } else {\r\n    likeCardItem(cardId)\r\n      .then((updatedCard) => {\r\n        likeCard(likeButton, likeNumber, updatedCard);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n};\r\n\r\nconst onClickCard = (cardImage, title) => {\r\n  popupImageSrc.src = cardImage.src;\r\n  popupImageSrc.alt = cardImage.alt;\r\n  popupImageCaption.textContent = title.textContent;\r\n  openModal(popupImage);\r\n};\r\n\r\nconst renderLoading = (popupButton, isLoading) => {\r\n  if (isLoading) {\r\n    popupButton.textContent = \"Сохранение...\";\r\n  } else {\r\n    popupButton.textContent = \"Сохранить\";\r\n  }\r\n};\r\n\r\nconst onFormEditSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const popupButton = editForm.querySelector(\".popup__button\");\r\n  renderLoading(popupButton, true);\r\n  editUserProfile(editFormName.value, editFormDesc.value)\r\n    .then((result) => {\r\n      profileTitle.textContent = result.name;\r\n      profileDesc.textContent = result.about;\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => renderLoading(popupButton, false));\r\n  closeModal(evt.target.closest(\".popup\"));\r\n};\r\n\r\nconst onFormAddSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const popupButton = addForm.querySelector(\".popup__button\");\r\n  renderLoading(popupButton, true);\r\n  Promise.all([\r\n    addNewCardItem(addFormName.value, addFormLink.value),\r\n    getUserProfile(),\r\n  ])\r\n    .then(([card, user]) => {\r\n      const newCardElement = createCard(\r\n        card,\r\n        user,\r\n        onDeleteCard,\r\n        onLikeCard,\r\n        onClickCard\r\n      );\r\n      placeListElement.prepend(newCardElement);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => renderLoading(popupButton, false));\r\n  addForm.reset();\r\n  closeModal(evt.target.closest(\".popup\"));\r\n};\r\n\r\nconst onFormAvatarSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const popupButton = avatarForm.querySelector(\".popup__button\");\r\n  renderLoading(popupButton, true);\r\n  editUserAvatar(avatarFormLink.value)\r\n    .then((user) => {\r\n      profileAvatar.style = `background-image: url(${user.avatar})`;\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => renderLoading(popupButton, false));\r\n  avatarForm.reset();\r\n  closeModal(evt.target.closest(\".popup\"));\r\n};\r\n\r\npopupClose.forEach((cross) => {\r\n  cross.addEventListener(\"click\", (evt) => {\r\n    closeModal(evt.target.closest(\".popup\"));\r\n  });\r\n});\r\n\r\nprofileEditButton.addEventListener(\"click\", () => {\r\n  clearValidation(editForm, validationConfig);\r\n  editFormName.value = profileTitle.textContent;\r\n  editFormDesc.value = profileDesc.textContent;\r\n  openModal(profileEditPopup);\r\n});\r\n\r\nprofileAddButton.addEventListener(\"click\", () => {\r\n  addForm.reset();\r\n  clearValidation(addForm, validationConfig);\r\n  openModal(profileAddPopup);\r\n});\r\n\r\nprofileAvatar.addEventListener(\"click\", () => {\r\n  avatarForm.reset();\r\n  clearValidation(avatarForm, validationConfig);\r\n  openModal(avatarPopup);\r\n});\r\n\r\neditForm.addEventListener(\"submit\", onFormEditSubmit);\r\naddForm.addEventListener(\"submit\", onFormAddSubmit);\r\navatarPopup.addEventListener(\"submit\", onFormAvatarSubmit);\r\n\r\nconst renderUserProfile = () => {\r\n  getUserProfile()\r\n    .then((user) => {\r\n      profileTitle.textContent = user.name;\r\n      profileDesc.textContent = user.about;\r\n      profileAvatar.style = `background-image: url(${user.avatar})`;\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nconst renderPlacesList = () => {\r\n  Promise.all([getUserProfile(), getInitialCards()])\r\n    .then(([user, cards]) => {\r\n      cards.forEach((card) => {\r\n        const cardElement = createCard(\r\n          card,\r\n          user,\r\n          onDeleteCard,\r\n          onLikeCard,\r\n          onClickCard\r\n        );\r\n        placeListElement.append(cardElement);\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nrenderUserProfile();\r\nrenderPlacesList();\r\nenableValidation(validationConfig);\r\n"],"names":["cardTemplate","document","querySelector","content","createCard","card","user","deleteOnClick","likeOnClick","cardOnClick","cardElement","cloneNode","cardImage","deleteButton","title","likeButton","likeNumber","setAttribute","name","link","owner","_id","addEventListener","classList","add","textContent","likes","length","some","likeUser","toggle","likeCard","likeNumberElement","updatedCard","onEscape","evt","key","closeModal","onClickExit","target","openModal","popUpElement","remove","removeEventListener","hideInputError","form","input","config","errorElement","concat","id","inputErrorClass","errorClass","toggleButtonState","inputs","button","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","clearValidation","Array","from","querySelectorAll","inputSelector","forEach","submitButtonSelector","url","headers","authorization","getUserProfile","fetch","then","res","ok","json","Promise","reject","status","validationConfig","formSelector","placeListElement","profileEditButton","profileEditPopup","popupClose","profileTitle","profileDesc","profileAvatar","editForm","editFormName","editFormDesc","profileAddButton","profileAddPopup","addForm","addFormName","addFormLink","popupImage","popupImageSrc","popupImageCaption","avatarForm","avatarPopup","avatarFormLink","onDeleteCard","cardId","method","deleteCardItem","catch","err","console","log","deleteCard","onLikeCard","contains","disLikeCardItem","likeCardItem","onClickCard","src","alt","renderLoading","popupButton","isLoading","cross","closest","value","reset","preventDefault","about","body","JSON","stringify","result","finally","all","_ref","_ref2","_slicedToArray","newCardElement","prepend","avatar","style","_ref3","_ref4","append","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListener","enableValidation"],"sourceRoot":""}