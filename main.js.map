{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex.practicum/./src/scripts/components/card.js","webpack://yandex.practicum/./src/scripts/components/modal.js","webpack://yandex.practicum/./src/scripts/components/validation.js","webpack://yandex.practicum/./src/scripts/components/api.js","webpack://yandex.practicum/./src/scripts/index.js"],"sourcesContent":["const cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nfunction createCard(card, userId, deleteOnClick, likeOnClick, cardOnClick) {\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true);\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const title = cardElement.querySelector(\".card__title\");\r\n  const likeButton = cardElement.querySelector(\".card__like-button\");\r\n  const likeNumber = cardElement.querySelector(\".card__like-number\");\r\n\r\n  cardImage.setAttribute(\"alt\", card.name);\r\n  cardImage.setAttribute(\"src\", card.link);\r\n  if (card.owner._id === userId) {\r\n    deleteButton.addEventListener(\"click\", () =>\r\n      deleteOnClick(cardElement, card._id)\r\n    );\r\n    deleteButton.classList.add(\"card__delete-button-is_active\");\r\n  }\r\n  likeButton.addEventListener(\"click\", () =>\r\n    likeOnClick(likeButton, card._id, likeNumber)\r\n  );\r\n  cardImage.addEventListener(\"click\", () => cardOnClick(cardImage, title));\r\n  title.textContent = card.name;\r\n  likeNumber.textContent = card.likes.length;\r\n  if (card.likes.some((likeUser) => likeUser._id === userId)) {\r\n    likeButton.classList.toggle(\"card__like-button_is-active\");\r\n  }\r\n  return cardElement;\r\n}\r\n\r\nfunction deleteCard(cardElement) {\r\n  cardElement.remove();\r\n}\r\n\r\nfunction likeCard(cardElement, likeNumberElement, updatedCard) {\r\n  likeNumberElement.textContent = updatedCard.likes.length;\r\n  cardElement.classList.toggle(\"card__like-button_is-active\");\r\n}\r\n\r\nexport { createCard, deleteCard, likeCard };\r\n","const onEscape = (evt) => {\r\n  if (evt.key == \"Escape\") {\r\n    closeModal(document.querySelector(\".popup_is-opened\"));\r\n  }\r\n};\r\n\r\nconst onClickExit = (evt) => {\r\n  if (evt.target === document.querySelector(\".popup_is-opened\")) {\r\n    closeModal(document.querySelector(\".popup_is-opened\"));\r\n  }\r\n};\r\n\r\nfunction openModal(popUpElement) {\r\n  popUpElement.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", onEscape);\r\n  document.addEventListener(\"mousedown\", onClickExit);\r\n}\r\n\r\nfunction closeModal(popUpElement) {\r\n  popUpElement.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", onEscape);\r\n  document.removeEventListener(\"mousedown\", onClickExit);\r\n}\r\n\r\nexport { openModal, closeModal };\r\n","const hideInputError = (form, input, config) => {\r\n  const errorElement = form.querySelector(`.${input.id}-error`);\r\n  input.classList.remove(config.inputErrorClass);\r\n  errorElement.classList.remove(config.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\nconst showInputError = (form, input, errorMessage, config) => {\r\n  const errorElement = form.querySelector(`.${input.id}-error`);\r\n  input.classList.add(config.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(config.errorClass);\r\n};\r\n\r\nconst checkInputValidity = (form, input, config) => {\r\n  if (input.validity.patternMismatch) {\r\n    input.setCustomValidity(input.dataset.errorMessage);\r\n  } else {\r\n    input.setCustomValidity(\"\");\r\n  }\r\n  if (!input.validity.valid) {\r\n    showInputError(form, input, input.validationMessage, config);\r\n  } else {\r\n    hideInputError(form, input, config);\r\n  }\r\n};\r\n\r\nconst hasInvalidInput = (inputs) => {\r\n  return inputs.some((input) => {\r\n    return !input.validity.valid;\r\n  });\r\n};\r\n\r\nconst toggleButtonState = (inputs, button, config) => {\r\n  if (hasInvalidInput(inputs)) {\r\n    button.disabled = true;\r\n    button.classList.add(config.inactiveButtonClass);\r\n  } else {\r\n    button.disabled = false;\r\n    button.classList.remove(config.inactiveButtonClass);\r\n  }\r\n};\r\n\r\nconst setEventListener = (form, config) => {\r\n  const inputs = Array.from(form.querySelectorAll(config.inputSelector));\r\n  const button = form.querySelector(config.submitButtonSelector);\r\n  toggleButtonState(inputs, button, config);\r\n  inputs.forEach((input) => {\r\n    input.addEventListener(\"input\", () => {\r\n      checkInputValidity(form, input, config);\r\n      toggleButtonState(inputs, button, config);\r\n    });\r\n  });\r\n};\r\n\r\nconst enableValidation = (config) => {\r\n  const forms = Array.from(document.querySelectorAll(config.formSelector));\r\n  forms.forEach((form) => {\r\n    form.addEventListener(\"submit\", (evt) => {\r\n      evt.preventDefault();\r\n    });\r\n    setEventListener(form, config);\r\n  });\r\n};\r\n\r\nconst clearValidation = (form,config) => {\r\n  const inputs = Array.from(\r\n    form.querySelectorAll(config.inputSelector)\r\n  );\r\n  inputs.forEach((input) => {\r\n    hideInputError(form, input, config);\r\n  });\r\n  const button = form.querySelector(config.submitButtonSelector);\r\n  toggleButtonState(inputs, button, config);\r\n};\r\n\r\nexport { enableValidation, clearValidation };\r\n","const config = {\r\n  url: \"https://nomoreparties.co/v1/wff-cohort-41\",\r\n  headers: {\r\n    authorization: \"72a12bab-2ae0-4e7f-b7a7-608bd2c81fb1\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nconst checkResponse = (res) => {\r\n  return res.ok ? res.json() : Promise.reject(`API error: ${res.status}`);\r\n};\r\n\r\nconst getInitialCards = () => {\r\n  return fetch(`${config.url}/cards`, { headers: config.headers }).then((res) =>\r\n    checkResponse(res)\r\n  );\r\n};\r\n\r\nconst addNewCardItem = (name, link) => {\r\n  return fetch(`${config.url}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, link }),\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nconst deleteCardItem = (cardId) => {\r\n  return fetch(`${config.url}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nconst likeCardItem = (cardId) => {\r\n  return fetch(`${config.url}/cards/likes/${cardId}`, {\r\n    method: \"PUT\",\r\n    headers: config.headers,\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nconst disLikeCardItem = (cardId) => {\r\n  return fetch(`${config.url}/cards/likes/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nconst getUserProfile = () => {\r\n  return fetch(`${config.url}/users/me`, { headers: config.headers }).then(\r\n    (res) => checkResponse(res)\r\n  );\r\n};\r\n\r\nconst editUserProfile = (name, about) => {\r\n  return fetch(`${config.url}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, about }),\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nconst editUserAvatar = (avatar) => {\r\n  return fetch(`${config.url}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ avatar }),\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nexport {\r\n  getInitialCards,\r\n  getUserProfile,\r\n  editUserProfile,\r\n  addNewCardItem,\r\n  deleteCardItem,\r\n  likeCardItem,\r\n  disLikeCardItem,\r\n  editUserAvatar,\r\n};\r\n","import \"../pages/index.css\";\r\nimport { createCard, deleteCard, likeCard } from \"./components/card.js\";\r\nimport { openModal, closeModal } from \"./components/modal.js\";\r\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\r\nimport {\r\n  getInitialCards,\r\n  getUserProfile,\r\n  editUserProfile,\r\n  addNewCardItem,\r\n  deleteCardItem,\r\n  likeCardItem,\r\n  disLikeCardItem,\r\n  editUserAvatar,\r\n} from \"./components/api.js\";\r\n\r\nlet userId = null;\r\nlet idCardForDelete;\r\nlet cardForDelete;\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nconst placeListElement = document.querySelector(\".places__list\");\r\nconst popupList = document.querySelectorAll(\".popup\");\r\n\r\nconst profileEditButton = document.querySelector(\".profile__edit-button\");\r\nconst profileEditPopup = document.querySelector(\".popup_type_edit\");\r\nconst popupClose = document.querySelectorAll(\".popup__close\");\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDesc = document.querySelector(\".profile__description\");\r\nconst profileAvatar = document.querySelector(\".profile__image\");\r\nconst editForm = document.querySelector('form[name=\"edit-profile\"]');\r\nconst editFormName = document.querySelector(\".popup__input_type_name\");\r\nconst editFormDesc = document.querySelector(\".popup__input_type_description\");\r\n\r\nconst profileAddButton = document.querySelector(\".profile__add-button\");\r\nconst profileAddPopup = document.querySelector(\".popup_type_new-card\");\r\nconst addForm = document.querySelector('form[name=\"new-place\"]');\r\nconst addFormName = document.querySelector(\".popup__input_type_card-name\");\r\nconst addFormLink = document.querySelector(\".popup__input_type_url\");\r\n\r\nconst popupImage = document.querySelector(\".popup_type_image\");\r\nconst popupImageSrc = document.querySelector(\".popup__image\");\r\nconst popupImageCaption = document.querySelector(\".popup__caption\");\r\n\r\nconst avatarForm = document.querySelector('form[name=\"new-avatar\"]');\r\nconst avatarPopup = document.querySelector(\".popup_type_new-avatar\");\r\nconst avatarFormLink = document.querySelector(\".popup__input_type_avatar_url\");\r\n\r\nconst deleteForm = document.querySelector(\".popup_type_approve-delete\");\r\n\r\nconst onDeleteCard = (cardElement, cardId) => {\r\n  idCardForDelete = cardId;\r\n  cardForDelete = cardElement;\r\n  openModal(deleteForm);\r\n};\r\n\r\nconst onLikeCard = (likeButton, cardId, likeNumber) => {\r\n  const cardIsLiked = likeButton.classList.contains(\r\n    \"card__like-button_is-active\"\r\n  );\r\n  if (cardIsLiked) {\r\n    disLikeCardItem(cardId)\r\n      .then((updatedCard) => {\r\n        likeCard(likeButton, likeNumber, updatedCard);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  } else {\r\n    likeCardItem(cardId)\r\n      .then((updatedCard) => {\r\n        likeCard(likeButton, likeNumber, updatedCard);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n};\r\n\r\nconst onClickCard = (cardImage, title) => {\r\n  popupImageSrc.src = cardImage.src;\r\n  popupImageSrc.alt = cardImage.alt;\r\n  popupImageCaption.textContent = title.textContent;\r\n  openModal(popupImage);\r\n};\r\n\r\nconst renderLoading = (popupButton, isLoading) => {\r\n  if (isLoading) {\r\n    popupButton.textContent = \"Сохранение...\";\r\n  } else {\r\n    popupButton.textContent = \"Сохранить\";\r\n  }\r\n};\r\n\r\nconst onFormEditSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const popupButton = editForm.querySelector(\".popup__button\");\r\n  renderLoading(popupButton, true);\r\n  editUserProfile(editFormName.value, editFormDesc.value)\r\n    .then((result) => {\r\n      profileTitle.textContent = result.name;\r\n      profileDesc.textContent = result.about;\r\n      closeModal(profileEditPopup);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => renderLoading(popupButton, false));\r\n};\r\n\r\nconst onFormAddSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const popupButton = addForm.querySelector(\".popup__button\");\r\n  renderLoading(popupButton, true);\r\n  addNewCardItem(addFormName.value, addFormLink.value)\r\n    .then((card) => {\r\n      const newCardElement = createCard(\r\n        card,\r\n        userId,\r\n        onDeleteCard,\r\n        onLikeCard,\r\n        onClickCard\r\n      );\r\n      placeListElement.prepend(newCardElement);\r\n      addForm.reset();\r\n      closeModal(profileAddPopup);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => renderLoading(popupButton, false));\r\n};\r\n\r\nconst onFormAvatarSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const popupButton = avatarForm.querySelector(\".popup__button\");\r\n  renderLoading(popupButton, true);\r\n  editUserAvatar(avatarFormLink.value)\r\n    .then((user) => {\r\n      profileAvatar.style = `background-image: url(${user.avatar})`;\r\n      avatarForm.reset();\r\n      closeModal(avatarPopup);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => renderLoading(popupButton, false));\r\n};\r\n\r\nconst onFormDeleteSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const popupButton = cardForDelete.querySelector(\".popup__button\");\r\n  deleteCardItem(idCardForDelete)\r\n    .then(() => {\r\n      deleteCard(cardForDelete);\r\n      closeModal(deleteForm);\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\npopupClose.forEach((cross) => {\r\n  cross.addEventListener(\"click\", (evt) => {\r\n    closeModal(evt.target.closest(\".popup\"));\r\n  });\r\n});\r\n\r\npopupList.forEach((popup) => {\r\n  popup.classList.add(\"popup_is-animated\");\r\n});\r\n\r\nprofileEditButton.addEventListener(\"click\", () => {\r\n  clearValidation(editForm, validationConfig);\r\n  editFormName.value = profileTitle.textContent;\r\n  editFormDesc.value = profileDesc.textContent;\r\n  openModal(profileEditPopup);\r\n});\r\n\r\nprofileAddButton.addEventListener(\"click\", () => {\r\n  addForm.reset();\r\n  clearValidation(addForm, validationConfig);\r\n  openModal(profileAddPopup);\r\n});\r\n\r\nprofileAvatar.addEventListener(\"click\", () => {\r\n  avatarForm.reset();\r\n  clearValidation(avatarForm, validationConfig);\r\n  openModal(avatarPopup);\r\n});\r\n\r\neditForm.addEventListener(\"submit\", onFormEditSubmit);\r\naddForm.addEventListener(\"submit\", onFormAddSubmit);\r\navatarPopup.addEventListener(\"submit\", onFormAvatarSubmit);\r\ndeleteForm.addEventListener(\"submit\", onFormDeleteSubmit);\r\n\r\nPromise.all([getUserProfile(), getInitialCards()])\r\n  .then(([user, cards]) => {\r\n    profileTitle.textContent = user.name;\r\n    profileDesc.textContent = user.about;\r\n    profileAvatar.style = `background-image: url(${user.avatar})`;\r\n    userId = user._id;\r\n\r\n    cards.forEach((card) => {\r\n      const cardElement = createCard(\r\n        card,\r\n        userId,\r\n        onDeleteCard,\r\n        onLikeCard,\r\n        onClickCard\r\n      );\r\n      placeListElement.append(cardElement);\r\n    });\r\n  })\r\n  .catch((err) => console.log(err));\r\n\r\nenableValidation(validationConfig);\r\n"],"names":["cardTemplate","document","querySelector","content","createCard","card","userId","deleteOnClick","likeOnClick","cardOnClick","cardElement","cloneNode","cardImage","deleteButton","title","likeButton","likeNumber","setAttribute","name","link","owner","_id","addEventListener","classList","add","textContent","likes","length","some","likeUser","toggle","likeCard","likeNumberElement","updatedCard","onEscape","evt","key","closeModal","onClickExit","target","openModal","popUpElement","remove","removeEventListener","hideInputError","form","input","config","errorElement","concat","id","inputErrorClass","errorClass","toggleButtonState","inputs","button","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","clearValidation","Array","from","querySelectorAll","inputSelector","forEach","submitButtonSelector","url","headers","authorization","checkResponse","res","ok","json","Promise","reject","status","idCardForDelete","cardForDelete","validationConfig","formSelector","placeListElement","popupList","profileEditButton","profileEditPopup","popupClose","profileTitle","profileDesc","profileAvatar","editForm","editFormName","editFormDesc","profileAddButton","profileAddPopup","addForm","addFormName","addFormLink","popupImage","popupImageSrc","popupImageCaption","avatarForm","avatarPopup","avatarFormLink","deleteForm","onDeleteCard","cardId","onLikeCard","contains","fetch","method","then","disLikeCardItem","catch","err","console","log","likeCardItem","onClickCard","src","alt","renderLoading","popupButton","isLoading","cross","closest","popup","value","reset","preventDefault","about","body","JSON","stringify","result","finally","newCardElement","prepend","avatar","user","style","all","_ref","_ref2","cards","append","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListener","enableValidation"],"sourceRoot":""}