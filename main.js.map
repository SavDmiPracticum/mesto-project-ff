{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex.practicum/./src/scripts/components/card.js","webpack://yandex.practicum/./src/scripts/components/modal.js","webpack://yandex.practicum/./src/scripts/components/validation.js","webpack://yandex.practicum/./src/scripts/index.js","webpack://yandex.practicum/./src/scripts/components/api.js"],"sourcesContent":["const cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nfunction createCard(card, userId, deleteOnClick, likeOnClick, cardOnClick) {\r\n  const cardElement = cardTemplate\r\n    .querySelector(\".places__item\")\r\n    .cloneNode(true);\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const title = cardElement.querySelector(\".card__title\");\r\n  const likeButton = cardElement.querySelector(\".card__like-button\");\r\n  const likeNumber = cardElement.querySelector(\".card__like-number\");\r\n\r\n  cardImage.setAttribute(\"alt\", card.name);\r\n  cardImage.setAttribute(\"src\", card.link);\r\n  if (card.owner._id === userId) {\r\n    deleteButton.addEventListener(\"click\", () =>\r\n      deleteOnClick(cardElement, card._id)\r\n    );\r\n    deleteButton.classList.add(\"card__delete-button-is_active\");\r\n  }\r\n  likeButton.addEventListener(\"click\", () =>\r\n    likeOnClick(likeButton, card._id, likeNumber)\r\n  );\r\n  cardImage.addEventListener(\"click\", () => cardOnClick(cardImage, title));\r\n  title.textContent = card.name;\r\n  likeNumber.textContent = card.likes.length;\r\n  if (card.likes.some((likeUser) => likeUser._id === userId)) {\r\n    likeButton.classList.toggle(\"card__like-button_is-active\");\r\n  }\r\n  return cardElement;\r\n}\r\n\r\nfunction deleteCard(cardElement) {\r\n  cardElement.remove();\r\n}\r\n\r\nfunction likeCard(cardElement, likeNumberElement, updatedCard) {\r\n  likeNumberElement.textContent = updatedCard.likes.length;\r\n  cardElement.classList.toggle(\"card__like-button_is-active\");\r\n}\r\n\r\nexport { createCard, deleteCard, likeCard };\r\n","const onEscape = (evt) => {\r\n  if (evt.key == \"Escape\") {\r\n    closeModal(document.querySelector(\".popup_is-opened\"));\r\n  }\r\n};\r\n\r\nconst onClickExit = (evt) => {\r\n  if (evt.target === document.querySelector(\".popup_is-opened\")) {\r\n    closeModal(document.querySelector(\".popup_is-opened\"));\r\n  }\r\n};\r\n\r\nfunction openModal(popUpElement) {\r\n  popUpElement.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", onEscape);\r\n  document.addEventListener(\"mousedown\", onClickExit);\r\n}\r\n\r\nfunction closeModal(popUpElement) {\r\n  popUpElement.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", onEscape);\r\n  document.removeEventListener(\"mousedown\", onClickExit);\r\n}\r\n\r\nexport { openModal, closeModal };\r\n","const hideInputError = (form, input, config) => {\r\n  const errorElement = form.querySelector(`.${input.id}-error`);\r\n  input.classList.remove(config.inputErrorClass);\r\n  errorElement.classList.remove(config.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\nconst showInputError = (form, input, errorMessage, config) => {\r\n  const errorElement = form.querySelector(`.${input.id}-error`);\r\n  input.classList.add(config.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(config.errorClass);\r\n};\r\n\r\nconst checkInputValidity = (form, input, config) => {\r\n  if (input.validity.patternMismatch) {\r\n    input.setCustomValidity(input.dataset.errorMessage);\r\n  } else {\r\n    input.setCustomValidity(\"\");\r\n  }\r\n  if (!input.validity.valid) {\r\n    showInputError(form, input, input.validationMessage, config);\r\n  } else {\r\n    hideInputError(form, input, config);\r\n  }\r\n};\r\n\r\nconst hasInvalidInput = (inputs) => {\r\n  return inputs.some((input) => {\r\n    return !input.validity.valid;\r\n  });\r\n};\r\n\r\nconst toggleButtonState = (inputs, button, config) => {\r\n  if (hasInvalidInput(inputs)) {\r\n    button.disabled = true;\r\n    button.classList.add(config.inactiveButtonClass);\r\n  } else {\r\n    button.disabled = false;\r\n    button.classList.remove(config.inactiveButtonClass);\r\n  }\r\n};\r\n\r\nconst setEventListener = (form, config) => {\r\n  const inputs = Array.from(form.querySelectorAll(config.inputSelector));\r\n  const button = form.querySelector(config.submitButtonSelector);\r\n  toggleButtonState(inputs, button, config);\r\n  inputs.forEach((input) => {\r\n    input.addEventListener(\"input\", () => {\r\n      checkInputValidity(form, input, config);\r\n      toggleButtonState(inputs, button, config);\r\n    });\r\n  });\r\n};\r\n\r\nconst enableValidation = (config) => {\r\n  const forms = Array.from(document.querySelectorAll(config.formSelector));\r\n  forms.forEach((form) => {\r\n    form.addEventListener(\"submit\", (evt) => {\r\n      evt.preventDefault();\r\n    });\r\n    setEventListener(form, config);\r\n  });\r\n};\r\n\r\nconst clearValidation = (form,config) => {\r\n  const inputs = Array.from(\r\n    form.querySelectorAll(config.inputSelector)\r\n  );\r\n  inputs.forEach((input) => {\r\n    hideInputError(form, input, config);\r\n  });\r\n  const button = form.querySelector(config.submitButtonSelector);\r\n  toggleButtonState(inputs, button, config);\r\n};\r\n\r\nexport { enableValidation, clearValidation };\r\n","import \"../pages/index.css\";\r\nimport { createCard, deleteCard, likeCard } from \"./components/card.js\";\r\nimport { openModal, closeModal } from \"./components/modal.js\";\r\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\r\nimport {\r\n  getInitialCards,\r\n  getUserProfile,\r\n  editUserProfile,\r\n  addNewCardItem,\r\n  deleteCardItem,\r\n  likeCardItem,\r\n  disLikeCardItem,\r\n  editUserAvatar,\r\n} from \"./components/api.js\";\r\n\r\nlet userId;\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nconst placeListElement = document.querySelector(\".places__list\");\r\nconst popupList = document.querySelectorAll(\".popup\");\r\n\r\nconst profileEditButton = document.querySelector(\".profile__edit-button\");\r\nconst profileEditPopup = document.querySelector(\".popup_type_edit\");\r\nconst popupClose = document.querySelectorAll(\".popup__close\");\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDesc = document.querySelector(\".profile__description\");\r\nconst profileAvatar = document.querySelector(\".profile__image\");\r\nconst editForm = document.querySelector('form[name=\"edit-profile\"]');\r\nconst editFormName = document.querySelector(\".popup__input_type_name\");\r\nconst editFormDesc = document.querySelector(\".popup__input_type_description\");\r\n\r\nconst profileAddButton = document.querySelector(\".profile__add-button\");\r\nconst profileAddPopup = document.querySelector(\".popup_type_new-card\");\r\nconst addForm = document.querySelector('form[name=\"new-place\"]');\r\nconst addFormName = document.querySelector(\".popup__input_type_card-name\");\r\nconst addFormLink = document.querySelector(\".popup__input_type_url\");\r\n\r\nconst popupImage = document.querySelector(\".popup_type_image\");\r\nconst popupImageSrc = document.querySelector(\".popup__image\");\r\nconst popupImageCaption = document.querySelector(\".popup__caption\");\r\n\r\nconst avatarForm = document.querySelector('form[name=\"new-avatar\"]');\r\nconst avatarPopup = document.querySelector(\".popup_type_new-avatar\");\r\nconst avatarFormLink = document.querySelector(\".popup__input_type_avatar_url\");\r\n\r\nconst onDeleteCard = (cardElement, cardId) => {\r\n  deleteCardItem(cardId)\r\n    .then(() => {\r\n      deleteCard(cardElement);\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nconst onLikeCard = (likeButton, cardId, likeNumber) => {\r\n  const cardIsLiked = likeButton.classList.contains(\r\n    \"card__like-button_is-active\"\r\n  );\r\n  if (cardIsLiked) {\r\n    disLikeCardItem(cardId)\r\n      .then((updatedCard) => {\r\n        likeCard(likeButton, likeNumber, updatedCard);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  } else {\r\n    likeCardItem(cardId)\r\n      .then((updatedCard) => {\r\n        likeCard(likeButton, likeNumber, updatedCard);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n};\r\n\r\nconst onClickCard = (cardImage, title) => {\r\n  popupImageSrc.src = cardImage.src;\r\n  popupImageSrc.alt = cardImage.alt;\r\n  popupImageCaption.textContent = title.textContent;\r\n  openModal(popupImage);\r\n};\r\n\r\nconst renderLoading = (popupButton, isLoading) => {\r\n  if (isLoading) {\r\n    popupButton.textContent = \"Сохранение...\";\r\n  } else {\r\n    popupButton.textContent = \"Сохранить\";\r\n  }\r\n};\r\n\r\nconst onFormEditSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const popupButton = editForm.querySelector(\".popup__button\");\r\n  renderLoading(popupButton, true);\r\n  editUserProfile(editFormName.value, editFormDesc.value)\r\n    .then((result) => {\r\n      profileTitle.textContent = result.name;\r\n      profileDesc.textContent = result.about;\r\n      closeModal(evt.target.closest(\".popup\"));\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => renderLoading(popupButton, false));\r\n};\r\n\r\nconst onFormAddSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const popupButton = addForm.querySelector(\".popup__button\");\r\n  renderLoading(popupButton, true);\r\n  addNewCardItem(addFormName.value, addFormLink.value)\r\n    .then((card) => {\r\n      const newCardElement = createCard(\r\n        card,\r\n        userId,\r\n        onDeleteCard,\r\n        onLikeCard,\r\n        onClickCard\r\n      );\r\n      placeListElement.prepend(newCardElement);\r\n      addForm.reset();\r\n      closeModal(evt.target.closest(\".popup\"));\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => renderLoading(popupButton, false));\r\n};\r\n\r\nconst onFormAvatarSubmit = (evt) => {\r\n  evt.preventDefault();\r\n  const popupButton = avatarForm.querySelector(\".popup__button\");\r\n  renderLoading(popupButton, true);\r\n  editUserAvatar(avatarFormLink.value)\r\n    .then((user) => {\r\n      profileAvatar.style = `background-image: url(${user.avatar})`;\r\n      avatarForm.reset();\r\n      closeModal(evt.target.closest(\".popup\"));\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => renderLoading(popupButton, false));\r\n};\r\n\r\npopupClose.forEach((cross) => {\r\n  cross.addEventListener(\"click\", (evt) => {\r\n    closeModal(evt.target.closest(\".popup\"));\r\n  });\r\n});\r\n\r\npopupList.forEach((popup) => {\r\n  popup.classList.add(\"popup_is-animated\");\r\n});\r\n\r\nprofileEditButton.addEventListener(\"click\", () => {\r\n  clearValidation(editForm, validationConfig);\r\n  editFormName.value = profileTitle.textContent;\r\n  editFormDesc.value = profileDesc.textContent;\r\n  openModal(profileEditPopup);\r\n});\r\n\r\nprofileAddButton.addEventListener(\"click\", () => {\r\n  addForm.reset();\r\n  clearValidation(addForm, validationConfig);\r\n  openModal(profileAddPopup);\r\n});\r\n\r\nprofileAvatar.addEventListener(\"click\", () => {\r\n  avatarForm.reset();\r\n  clearValidation(avatarForm, validationConfig);\r\n  openModal(avatarPopup);\r\n});\r\n\r\neditForm.addEventListener(\"submit\", onFormEditSubmit);\r\naddForm.addEventListener(\"submit\", onFormAddSubmit);\r\navatarPopup.addEventListener(\"submit\", onFormAvatarSubmit);\r\n\r\nconst initializeApp = () => {\r\n  Promise.all([getUserProfile(), getInitialCards()])\r\n    .then(([user, cards]) => {\r\n      profileTitle.textContent = user.name;\r\n      profileDesc.textContent = user.about;\r\n      profileAvatar.style = `background-image: url(${user.avatar})`;\r\n      userId = user._id;\r\n\r\n      cards.forEach((card) => {\r\n        const cardElement = createCard(\r\n          card,\r\n          userId,\r\n          onDeleteCard,\r\n          onLikeCard,\r\n          onClickCard\r\n        );\r\n        placeListElement.append(cardElement);\r\n      });\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\ninitializeApp();\r\nenableValidation(validationConfig);\r\n","const config = {\r\n  url: \"https://nomoreparties.co/v1/wff-cohort-41\",\r\n  headers: {\r\n    authorization: \"72a12bab-2ae0-4e7f-b7a7-608bd2c81fb1\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nconst checkResponse = (res) => {\r\n  return res.ok ? res.json() : Promise.reject(`API error: ${res.status}`);\r\n};\r\n\r\nconst getInitialCards = () => {\r\n  return fetch(`${config.url}/cards`, { headers: config.headers }).then((res) =>\r\n    checkResponse(res)\r\n  );\r\n};\r\n\r\nconst addNewCardItem = (name, link) => {\r\n  return fetch(`${config.url}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, link }),\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nconst deleteCardItem = (cardId) => {\r\n  return fetch(`${config.url}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nconst likeCardItem = (cardId) => {\r\n  return fetch(`${config.url}/cards/likes/${cardId}`, {\r\n    method: \"PUT\",\r\n    headers: config.headers,\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nconst disLikeCardItem = (cardId) => {\r\n  return fetch(`${config.url}/cards/likes/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nconst getUserProfile = () => {\r\n  return fetch(`${config.url}/users/me`, { headers: config.headers }).then(\r\n    (res) => checkResponse(res)\r\n  );\r\n};\r\n\r\nconst editUserProfile = (name, about) => {\r\n  return fetch(`${config.url}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, about }),\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nconst editUserAvatar = (avatar) => {\r\n  return fetch(`${config.url}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ avatar }),\r\n  }).then((res) => checkResponse(res));\r\n};\r\n\r\nexport {\r\n  getInitialCards,\r\n  getUserProfile,\r\n  editUserProfile,\r\n  addNewCardItem,\r\n  deleteCardItem,\r\n  likeCardItem,\r\n  disLikeCardItem,\r\n  editUserAvatar,\r\n};\r\n"],"names":["cardTemplate","document","querySelector","content","createCard","card","userId","deleteOnClick","likeOnClick","cardOnClick","cardElement","cloneNode","cardImage","deleteButton","title","likeButton","likeNumber","setAttribute","name","link","owner","_id","addEventListener","classList","add","textContent","likes","length","some","likeUser","toggle","likeCard","likeNumberElement","updatedCard","onEscape","evt","key","closeModal","onClickExit","target","openModal","popUpElement","remove","removeEventListener","hideInputError","form","input","config","errorElement","concat","id","inputErrorClass","errorClass","toggleButtonState","inputs","button","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","clearValidation","Array","from","querySelectorAll","inputSelector","forEach","submitButtonSelector","url","headers","authorization","checkResponse","res","ok","json","Promise","reject","status","validationConfig","formSelector","placeListElement","popupList","profileEditButton","profileEditPopup","popupClose","profileTitle","profileDesc","profileAvatar","editForm","editFormName","editFormDesc","profileAddButton","profileAddPopup","addForm","addFormName","addFormLink","popupImage","popupImageSrc","popupImageCaption","avatarForm","avatarPopup","avatarFormLink","onDeleteCard","cardId","fetch","method","then","deleteCardItem","deleteCard","catch","err","console","log","onLikeCard","contains","disLikeCardItem","likeCardItem","onClickCard","src","alt","renderLoading","popupButton","isLoading","cross","closest","popup","value","reset","preventDefault","about","body","JSON","stringify","result","finally","newCardElement","prepend","avatar","user","style","all","_ref","_ref2","cards","append","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListener","enableValidation"],"sourceRoot":""}